<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bot Status Page</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      overflow-x: hidden;
      color: white;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: -1;
    }

    .container {
      padding: 30px;
      text-align: center;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }

    input, button {
      padding: 10px;
      margin: 5px;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      border: 1px solid white;
      border-radius: 6px;
      outline: none;
    }

    .monitor {
      background: rgba(0, 0, 0, 0.5);
      margin-top: 15px;
      padding: 15px;
      border-radius: 10px;
      position: relative;
      border: 1px solid rgba(255, 0, 0, 0.3);
    }

    .red-line {
      width: 100%;
      height: 4px;
      background: red;
      margin-top: 10px;
      border-radius: 2px;
    }

    button.remove {
      background: red;
      color: white;
      border: none;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <canvas id="gradientCanvas"></canvas>
  <div class="container">
    <h1>Discord Bot Status</h1>
    <input id="botId" placeholder="Bot ID">
    <input id="botName" placeholder="Bot Name (optional)">
    <button onclick="addMonitor()">Add Monitor</button>

    <div id="monitorList"></div>
  </div>

  <script>
    const canvas = document.getElementById("gradientCanvas");
    const ctx = canvas.getContext("2d");
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      drawGradient();
    }
    function drawGradient() {
      let grad = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
      grad.addColorStop(0, "#1a2a6c");
      grad.addColorStop(0.5, "#b21f1f");
      grad.addColorStop(1, "#fdbb2d");
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    function getMonitors() {
      return JSON.parse(localStorage.getItem("monitors") || "[]");
    }

    function saveMonitors(monitors) {
      localStorage.setItem("monitors", JSON.stringify(monitors));
    }

    function addMonitor() {
      const id = document.getElementById("botId").value.trim();
      const name = document.getElementById("botName").value.trim() || id;
      if (!id) return alert("Bot ID required");
      const monitors = getMonitors();
      monitors.push({ id, name });
      saveMonitors(monitors);
      renderMonitors();
    }

    function removeMonitor(index) {
      const monitors = getMonitors();
      monitors.splice(index, 1);
      saveMonitors(monitors);
      renderMonitors();
    }

    async function checkStatus(botId) {
      try {
        const res = await fetch(`https://discord.com/api/v10/users/${botId}`);
        return res.ok;
      } catch {
        return false;
      }
    }

    async function renderMonitors() {
      const monitors = getMonitors();
      const list = document.getElementById("monitorList");
      list.innerHTML = "";
      for (let i = 0; i < monitors.length; i++) {
        const monitor = monitors[i];
        const isOnline = await checkStatus(monitor.id);

        const div = document.createElement("div");
        div.className = "monitor";
        div.innerHTML = `
          <strong>${monitor.name}</strong> (ID: ${monitor.id})
          <button class="remove" onclick="removeMonitor(${i})">Remove</button>
          ${!isOnline ? `<div class="red-line"></div>` : ""}
        `;
        list.appendChild(div);
      }
    }

    setInterval(renderMonitors, 10000);
    renderMonitors();
  </script>
</body>
</html>
